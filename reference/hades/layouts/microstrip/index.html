
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://patarimi.github.io/hades/reference/hades/layouts/microstrip/">
      
      
        <link rel="prev" href="../inductor/">
      
      
        <link rel="next" href="../tools/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>microstrip - HADes</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hades.layouts.microstrip" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="HADes" class="md-header__button md-logo" aria-label="HADes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HADes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              microstrip
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="HADes" class="md-nav__button md-logo" aria-label="HADes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    HADes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../CLI-ref/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI-Command
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API-Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API-Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    hades
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            hades
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibrators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    calibrators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../devices/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    devices
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            devices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/device/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    device
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/inductor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inductor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/micro_strip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    micro_strip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/mos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extractors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    extractors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    layouts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_4" id="__nav_3_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            layouts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    general
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inductor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inductor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    microstrip
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    microstrip
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip" class="md-nav__link">
    <span class="md-ellipsis">
      microstrip
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.coupled_lines" class="md-nav__link">
    <span class="md-ellipsis">
      coupled_lines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.lange_coupler" class="md-nav__link">
    <span class="md-ellipsis">
      lange_coupler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.marchand_balun" class="md-nav__link">
    <span class="md-ellipsis">
      marchand_balun
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.straight_line" class="md-nav__link">
    <span class="md-ellipsis">
      straight_line
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_6" id="__nav_3_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_6">
            <span class="md-nav__icon md-icon"></span>
            models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/inductor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inductor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/matching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matching
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/micro_strip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    micro_strip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../parsers/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    parsers
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_7" id="__nav_3_1_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_7">
            <span class="md-nav__icon md-icon"></span>
            parsers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parsers/layermap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    layermap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parsers/netlist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    netlist
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parsers/raw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    raw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parsers/spice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    spice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parsers/tlef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tlef
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parsers/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techno/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    techno
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../wrappers/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    wrappers
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_9" id="__nav_3_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_9">
            <span class="md-nav__icon md-icon"></span>
            wrappers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wrappers/em/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    em
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wrappers/ngspice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ngspice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wrappers/simulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simulator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip" class="md-nav__link">
    <span class="md-ellipsis">
      microstrip
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.coupled_lines" class="md-nav__link">
    <span class="md-ellipsis">
      coupled_lines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.lange_coupler" class="md-nav__link">
    <span class="md-ellipsis">
      lange_coupler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.marchand_balun" class="md-nav__link">
    <span class="md-ellipsis">
      marchand_balun
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hades.layouts.microstrip.straight_line" class="md-nav__link">
    <span class="md-ellipsis">
      straight_line
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>microstrip</h1>

<div class="doc doc-object doc-module">



<a id="hades.layouts.microstrip"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="hades.layouts.microstrip.coupled_lines" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">coupled_lines</span><span class="p">(</span><span class="n">width1</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">gap</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="n">width2</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ports</span><span class="o">=</span><span class="n">def_port</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;cpl&#39;</span><span class="p">)</span></code>

<a href="#hades.layouts.microstrip.coupled_lines" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

      <p>Generate a cell with two micro-strip lines coupled by a gap. Can be exported as a gds files.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>width1</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the first line.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>length</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>length of the two lines.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>gap</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>gap between the two lines.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>layerstack</code></td>
            <td>
                  <code><span title="hades.layouts.tools.LayerStack">LayerStack</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LayerStack object. The highest metal layer will be used for the signal line. The lowest metal layer will be used for the ground plane.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>width2</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the second line.</p>
              </div>
            </td>
            <td>
                  <code>-1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ports</code></td>
            <td>
                  <code>tuple[<span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of each port.</p>
              </div>
            </td>
            <td>
                  <code><span title="hades.layouts.microstrip.def_port">def_port</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the cell.</p>
              </div>
            </td>
            <td>
                  <code>&#39;cpl&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="gdstk.Cell">Cell</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>hades\layouts\microstrip.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">coupled_lines</span><span class="p">(</span>
    <span class="n">width1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">gap</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">layerstack</span><span class="p">:</span> <span class="n">LayerStack</span><span class="p">,</span>
    <span class="n">width2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">ports</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">]</span> <span class="o">=</span> <span class="n">def_port</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpl&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a cell with two micro-strip lines coupled by a gap. Can be exported as a gds files.</span>
<span class="sd">    :param width1: width of the first line.</span>
<span class="sd">    :param length: length of the two lines.</span>
<span class="sd">    :param gap: gap between the two lines.</span>
<span class="sd">    :param layerstack: LayerStack object. The highest metal layer will be used for the signal line.</span>
<span class="sd">    The lowest metal layer will be used for the ground plane.</span>
<span class="sd">    :param width2: width of the second line.</span>
<span class="sd">    :param ports: name of each port.</span>
<span class="sd">    :param name: name of the cell.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">w2</span> <span class="o">=</span> <span class="n">width2</span> <span class="k">if</span> <span class="n">width2</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">width1</span>
    <span class="n">ms1</span> <span class="o">=</span> <span class="n">straight_line</span><span class="p">(</span><span class="n">width1</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="n">ports</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">ms2</span> <span class="o">=</span> <span class="n">straight_line</span><span class="p">(</span><span class="n">w2</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="n">ports</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
    <span class="n">cpl</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">ms_rf</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">ms1</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">width1</span> <span class="o">*</span> <span class="mf">1e6</span> <span class="o">+</span> <span class="n">gap</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">ms_rf2</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">ms2</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">w2</span> <span class="o">*</span> <span class="mf">1e6</span> <span class="o">+</span> <span class="n">gap</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">cpl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ms_rf</span><span class="p">,</span> <span class="n">ms_rf2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cpl</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hades.layouts.microstrip.lange_coupler" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lange_coupler</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">gap</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="n">ports</span><span class="o">=</span><span class="n">def_port</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;lange&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></code>

<a href="#hades.layouts.microstrip.lange_coupler" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

      <p>Generate a flat symmetrical lange coupler with two strips per track.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>track width (in µm)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>length</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>total length of the lines.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>gap</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>space between each track.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>layerstack</code></td>
            <td>
                  <code><span title="hades.layouts.tools.LayerStack">LayerStack</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LayerStack object. The highest metal layer will be used for the signal line. The lowest metal layer will be used for the ground plane. The second higher metal layer will be used for bridging.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ports</code></td>
            <td>
                  <code>tuple[<span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of each port.</p>
              </div>
            </td>
            <td>
                  <code><span title="hades.layouts.microstrip.def_port">def_port</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the returned cell.</p>
              </div>
            </td>
            <td>
                  <code>&#39;lange&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ext</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>extension of the ports</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="gdstk.Cell">Cell</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>hades\layouts\microstrip.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">lange_coupler</span><span class="p">(</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">gap</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">layerstack</span><span class="p">:</span> <span class="n">LayerStack</span><span class="p">,</span>
    <span class="n">ports</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">]</span> <span class="o">=</span> <span class="n">def_port</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lange&quot;</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a flat symmetrical lange coupler with two strips per track.</span>
<span class="sd">    :param width: track width (in µm)</span>
<span class="sd">    :param length: total length of the lines.</span>
<span class="sd">    :param gap: space between each track.</span>
<span class="sd">    :param layerstack: LayerStack object. The highest metal layer will be used for the signal line.</span>
<span class="sd">    The lowest metal layer will be used for the ground plane. The second higher metal layer will be used for bridging.</span>
<span class="sd">    :param ports: name of each port.</span>
<span class="sd">    :param name: name of the returned cell.</span>
<span class="sd">    :param ext: extension of the ports</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">le</span><span class="p">,</span> <span class="n">g</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">,</span> <span class="n">length</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">,</span> <span class="n">gap</span> <span class="o">*</span> <span class="mf">1e6</span>
    <span class="n">top_metal</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">bridge</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">top_via</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_via_layer</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">bot_metal</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">first_met</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">FlexPath</span><span class="p">(</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">w</span><span class="p">,</span>
        <span class="n">layer</span><span class="o">=</span><span class="n">top_metal</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span>
        <span class="n">datatype</span><span class="o">=</span><span class="n">top_metal</span><span class="o">.</span><span class="n">datatype</span><span class="p">,</span>
        <span class="n">ends</span><span class="o">=</span><span class="s2">&quot;extended&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">first_met</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="n">le</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">first_met</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">w</span> <span class="o">+</span> <span class="n">g</span><span class="p">),</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">first_met</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="o">-</span><span class="n">le</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">first_met</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">port</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">FlexPath</span><span class="p">(</span>
        <span class="p">(</span><span class="n">le</span><span class="p">,</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">g</span><span class="p">),</span> <span class="n">w</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">top_metal</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">top_metal</span><span class="o">.</span><span class="n">datatype</span>
    <span class="p">)</span>
    <span class="n">port</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sec_met</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">FlexPath</span><span class="p">(</span>
        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">w</span> <span class="o">+</span> <span class="n">g</span><span class="p">))],</span>
        <span class="n">w</span><span class="p">,</span>
        <span class="n">layer</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span>
        <span class="n">datatype</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">datatype</span><span class="p">,</span>
        <span class="n">ends</span><span class="o">=</span><span class="s2">&quot;extended&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">via_w</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="n">via_g</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="n">via_s</span> <span class="o">=</span> <span class="mf">0.02</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">w</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">via_s</span> <span class="o">-</span> <span class="n">via_w</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">via_w</span> <span class="o">+</span> <span class="n">via_g</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">shift</span> <span class="o">=</span> <span class="o">-</span><span class="n">via_w</span> <span class="o">-</span> <span class="p">(</span><span class="n">rep</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">via_w</span> <span class="o">+</span> <span class="n">via_g</span><span class="p">)</span>
    <span class="n">via</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">via_w</span><span class="p">,</span> <span class="n">via_w</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="n">top_via</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">top_via</span><span class="o">.</span><span class="n">datatype</span>
    <span class="p">)</span>
    <span class="n">via</span><span class="o">.</span><span class="n">repetition</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Repetition</span><span class="p">(</span><span class="n">rep</span><span class="p">,</span> <span class="n">rep</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="p">(</span><span class="n">via_g</span> <span class="o">+</span> <span class="n">via_w</span><span class="p">,</span> <span class="n">via_g</span> <span class="o">+</span> <span class="n">via_w</span><span class="p">))</span>
    <span class="n">via</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">shift</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">shift</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">via2</span> <span class="o">=</span> <span class="n">via</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">via2</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">w</span> <span class="o">+</span> <span class="n">g</span><span class="p">))</span>
    <span class="n">lange</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">thg</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">(</span><span class="s2">&quot;thg&quot;</span><span class="p">)</span>
    <span class="n">thg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">first_met</span><span class="p">,</span> <span class="n">sec_met</span><span class="p">,</span> <span class="n">via</span><span class="p">,</span> <span class="n">via2</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
    <span class="n">cpl</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">thg</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="n">le</span> <span class="o">-</span> <span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">,</span> <span class="n">w</span> <span class="o">+</span> <span class="n">g</span><span class="p">))</span>
    <span class="n">thg_r</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">thg</span><span class="p">)</span>
    <span class="n">lange</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cpl</span><span class="p">,</span> <span class="n">thg_r</span><span class="p">)</span>
    <span class="n">lange</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ext</span> <span class="o">+</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">g</span><span class="p">),</span>
            <span class="p">(</span><span class="n">le</span><span class="p">,</span> <span class="n">ext</span> <span class="o">+</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">g</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">,</span> <span class="o">-</span><span class="n">ext</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">),</span>
            <span class="p">(</span><span class="n">le</span> <span class="o">-</span> <span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">,</span> <span class="o">-</span><span class="n">ext</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">lab</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">coord</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">layer</span><span class="o">=</span><span class="n">top_metal</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span>
            <span class="n">texttype</span><span class="o">=</span><span class="n">top_metal</span><span class="o">.</span><span class="n">datatype</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ref</span><span class="p">,</span> <span class="n">coord</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">layer</span><span class="o">=</span><span class="n">bot_metal</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">texttype</span><span class="o">=</span><span class="n">bot_metal</span><span class="o">.</span><span class="n">datatype</span>
        <span class="p">)</span>
        <span class="n">lange</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lab</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">lange</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
    <span class="n">gnd</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
        <span class="n">dim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">layer</span><span class="o">=</span><span class="n">bot_metal</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">bot_metal</span><span class="o">.</span><span class="n">datatype</span>
    <span class="p">)</span>
    <span class="n">lange</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">gnd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lange</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hades.layouts.microstrip.marchand_balun" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">marchand_balun</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">gap</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="n">widths</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ports</span><span class="o">=</span><span class="n">diff_port</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;marchand&#39;</span><span class="p">)</span></code>

<a href="#hades.layouts.microstrip.marchand_balun" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

      <p>Implements a marchand balun, for a 50Ω balun, 2 -4.8 dB 90° coupler are required.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the signal lines.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>length</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>length of the signal line (the coupler length is twice this value).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>gap</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>gap between the two lines.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>space</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>space between the two couplers.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>layerstack</code></td>
            <td>
                  <code><span title="hades.layouts.tools.LayerStack">LayerStack</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LayerStack object. The highest metal layer will be used for the signal line. The lowest metal layer will be used for the ground plane.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>widths</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the line in-between the two couplers.</p>
              </div>
            </td>
            <td>
                  <code>-1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ports</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" href="../../../../CLI-ref/#list">list</a>[<span title="hades.layouts.tools.Port">Port</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of each port.</p>
              </div>
            </td>
            <td>
                  <code><span title="hades.layouts.microstrip.diff_port">diff_port</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the cell.</p>
              </div>
            </td>
            <td>
                  <code>&#39;marchand&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="gdstk.Cell">Cell</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a gdstk.Cell object with the marchand balun.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>hades\layouts\microstrip.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">marchand_balun</span><span class="p">(</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">gap</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">space</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">layerstack</span><span class="p">:</span> <span class="n">LayerStack</span><span class="p">,</span>
    <span class="n">widths</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">ports</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Port</span><span class="p">]</span> <span class="o">=</span> <span class="n">diff_port</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;marchand&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implements a marchand balun, for a 50Ω balun, 2 -4.8 dB 90° coupler are required.</span>
<span class="sd">    :param width: width of the signal lines.</span>
<span class="sd">    :param length: length of the signal line (the coupler length is twice this value).</span>
<span class="sd">    :param gap: gap between the two lines.</span>
<span class="sd">    :param space: space between the two couplers.</span>
<span class="sd">    :param layerstack: LayerStack object. The highest metal layer will be used for the signal line.</span>
<span class="sd">        The lowest metal layer will be used for the ground plane.</span>
<span class="sd">    :param widths: width of the line in-between the two couplers.</span>
<span class="sd">    :param ports: name of each port.</span>
<span class="sd">    :param name: name of the cell.</span>
<span class="sd">    :return: a gdstk.Cell object with the marchand balun.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m_top</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">m_bott</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">le</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">,</span> <span class="n">length</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">,</span> <span class="n">gap</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">,</span> <span class="n">space</span> <span class="o">*</span> <span class="mf">1e6</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">w</span> <span class="k">if</span> <span class="n">widths</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">widths</span> <span class="o">*</span> <span class="mf">1e6</span>
    <span class="n">bln</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">emp_port</span> <span class="o">=</span> <span class="n">Port</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">cpl</span> <span class="o">=</span> <span class="n">lange_coupler</span><span class="p">(</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">gap</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="p">[</span><span class="n">emp_port</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span> <span class="n">ext</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>
    <span class="n">cpl1</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">cpl</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">le</span><span class="p">),</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x_reflection</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cpl1_bb</span> <span class="o">=</span> <span class="n">cpl1</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
    <span class="n">cpl2</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">cpl</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">),</span> <span class="o">-</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">cpl2_bb</span> <span class="o">=</span> <span class="n">cpl2</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
        <span class="p">(</span><span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">+</span> <span class="n">g</span> <span class="o">+</span> <span class="n">ws</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
        <span class="p">(</span><span class="n">cpl2_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">cpl2_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">+</span> <span class="n">g</span> <span class="o">-</span> <span class="n">ws</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
        <span class="o">**</span><span class="n">m_top</span><span class="o">.</span><span class="n">map</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">bln</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cpl1</span><span class="p">,</span> <span class="n">cpl2</span><span class="p">,</span> <span class="n">r1</span><span class="p">)</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
        <span class="n">bln</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">bln</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span>
        <span class="o">**</span><span class="n">m_bott</span><span class="o">.</span><span class="n">map</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">bln</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">,</span> <span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
            <span class="p">(</span><span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">+</span> <span class="n">g</span><span class="p">,</span> <span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
            <span class="p">(</span><span class="n">cpl2_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">w</span> <span class="o">-</span> <span class="n">g</span><span class="p">,</span> <span class="n">cpl2_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="n">lab</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">coord</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">layer</span><span class="o">=</span><span class="n">m_top</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span>
            <span class="n">texttype</span><span class="o">=</span><span class="n">m_top</span><span class="o">.</span><span class="n">datatype</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bln</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lab</span><span class="p">)</span>
    <span class="n">bln</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span>
            <span class="n">via_stack</span><span class="p">(</span><span class="n">layerstack</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">g</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="n">w</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">cpl1_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">g</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">w</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">bln</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">gdstk</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span>
            <span class="n">via_stack</span><span class="p">(</span><span class="n">layerstack</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">g</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="n">w</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">cpl2_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">g</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="n">cpl2_bb</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">g</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">w</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">bln</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hades.layouts.microstrip.straight_line" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">straight_line</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">layerstack</span><span class="p">,</span> <span class="n">ports</span><span class="o">=</span><span class="p">(</span><span class="n">Port</span><span class="p">(</span><span class="s1">&#39;S1&#39;</span><span class="p">),</span> <span class="n">Port</span><span class="p">(</span><span class="s1">&#39;S2&#39;</span><span class="p">)),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span></code>

<a href="#hades.layouts.microstrip.straight_line" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

      <p>Generate a micro-strip straight line cell. Can be exported as a gds files.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the cell generated</p>
              </div>
            </td>
            <td>
                  <code>&#39;ms&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the signal line (Reference line is three time wider).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>length</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Length of the micro-strip.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>layerstack</code></td>
            <td>
                  <code><span title="hades.layouts.tools.LayerStack">LayerStack</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LayerStack object. The highest metal layer will be used for the signal line. The lowest metal layer will be used for the ground plane.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ports</code></td>
            <td>
                  <code>tuple[<span title="hades.layouts.tools.Port">Port</span>, <span title="hades.layouts.tools.Port">Port</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the ports</p>
              </div>
            </td>
            <td>
                  <code>(<span title="hades.layouts.tools.Port">Port</span>(&#39;S1&#39;), <span title="hades.layouts.tools.Port">Port</span>(&#39;S2&#39;))</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="gdstk.Cell">Cell</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>hades\layouts\microstrip.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">straight_line</span><span class="p">(</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">layerstack</span><span class="p">:</span> <span class="n">LayerStack</span><span class="p">,</span>
    <span class="n">ports</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Port</span><span class="p">,</span> <span class="n">Port</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Port</span><span class="p">(</span><span class="s2">&quot;S1&quot;</span><span class="p">),</span> <span class="n">Port</span><span class="p">(</span><span class="s2">&quot;S2&quot;</span><span class="p">)),</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ms&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a micro-strip straight line cell. Can be exported as a gds files.</span>
<span class="sd">    :param name: name of the cell generated</span>
<span class="sd">    :param width: Width of the signal line (Reference line is three time wider).</span>
<span class="sd">    :param length: Length of the micro-strip.</span>
<span class="sd">    :param layerstack: LayerStack object. The highest metal layer will be used for the signal line.</span>
<span class="sd">    The lowest metal layer will be used for the ground plane.</span>
<span class="sd">    :param ports: name of the ports</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m_top</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">m_bott</span> <span class="o">=</span> <span class="n">layerstack</span><span class="o">.</span><span class="n">get_metal_layer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ms</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">Cell</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">le</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="mf">1e6</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="mf">1e6</span>
    <span class="n">rf</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">RobustPath</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">w</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">m_top</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">m_top</span><span class="o">.</span><span class="n">datatype</span><span class="p">)</span>
    <span class="n">rf</span><span class="o">.</span><span class="n">segment</span><span class="p">((</span><span class="n">le</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">gnd</span> <span class="o">=</span> <span class="n">gdstk</span><span class="o">.</span><span class="n">RobustPath</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">m_bott</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">m_bott</span><span class="o">.</span><span class="n">datatype</span><span class="p">)</span>
    <span class="n">gnd</span><span class="o">.</span><span class="n">segment</span><span class="p">((</span><span class="n">le</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">ms</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rf</span><span class="p">,</span> <span class="n">gnd</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">ms</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
            <span class="n">gdstk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">le</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="n">m_top</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">texttype</span><span class="o">=</span><span class="n">m_top</span><span class="o">.</span><span class="n">datatype</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">ms</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
            <span class="n">gdstk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ref</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">le</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="n">m_bott</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="n">texttype</span><span class="o">=</span><span class="n">m_bott</span><span class="o">.</span><span class="n">datatype</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">ms</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>